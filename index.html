<html>

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width" , initial-scale="1">
    <title>금준호 포트폴리오</title>
    <link rel="stylesheet" href="./css/index.css">
    <script src="./data.js"></script>
    <script type="text/javascript">
        function orderChange() {
            var orderSelect = document.getElementById("order");
            if (orderSelect.value == "규모순") {
                location.href = './index.php?order=size';
            }
            else {
                location.href = './index.php';
            }
        }

        function loadData() {
            var projectList = document.getElementById('projectList')
            for (var proejct of this.portfolioData) {
                projectList.appendChild(new ProjectCard(proejct))
            }
        }

        let whleePreventEvent = function (e) {
            e.preventDefault();
        }

        function turnOffWheel() {
            window.addEventListener("wheel", whleePreventEvent, { passive: false });
        }

        function turnOnWheel() {
            window.removeEventListener('wheel', whleePreventEvent)
        }

        turnOnWheel()

        document.addEventListener('wheel', async (event) => {
            //wheel의 위치가 이동 될 때까지 대기
            await new Promise(resolve => setTimeout(resolve, 100))
            let projectListTop = document.getElementById('projectList').offsetTop
            if (window.scrollY > projectListTop) {
                return
            }

            if (event.deltaY > 0) {
                gotoProjectList()
                turnOnWheel()
            } else {
                gotoTop()
                turnOffWheel()
            }
        })

        function gotoProjectList() {
            let projectList = document.getElementById('projectList')
            projectList.scrollIntoView({ behavior: 'smooth', block: "start" })
        }

        function gotoTop() {
            window.scrollTo({
                top: 0,
                behavior: 'smooth'
            })
        }

        class ProjectCard extends HTMLElement {
            proejctData = {}

            attributes = [
                'url',
                'title',
                'type',
                'explanation',
                'date',
                'language'
            ]

            constructor(proejct) {
                super()
                this.proejctData = proejct
            }

            connectedCallback() {
                this.attachShadow({ mode: 'open' })

                this.shadowRoot.appendChild(cardTempalte.content.cloneNode(true))
                for (var attribute of this.attributes) {
                    var elements = this.shadowRoot.getElementById(attribute)
                    if (!elements) {
                        console.warn(`${elements} is not found`)
                        continue
                    }

                    if (attribute === 'url') {
                        elements.setAttribute('src', this.proejctData[attribute])
                        continue
                    }
                    elements.innerText = this.proejctData[attribute]
                }
            }
        }

        customElements.define('project-card', ProjectCard)
    </script>
</head>

<body onload="loadData()">
    <template id="cardTempalte">
        <link rel="stylesheet" href="./css/card.css">

        <div class="container">
            <div class='youtube'>
                <iframe id='url'></iframe>
            </div>
            <div class='content'>
                <div class="title">
                    <strong id='title'></strong>
                </div>
                <div class="tag-area">
                    <span class='type' id='type'></span>
                    <span class='language' id='language'></span>
                </div>
                <div id="explanation" class="explanation"></div>
                <div id="date" class="date"></div>
            </div>
        </div>
    </template>

    <div class="top-container">
        <div class="slogan-area">
            <div class="slogan-text slogan-title">
                세상을 디버깅 하는 개발자
            </div>
            <div class="slogan-text slogan-name">
                금준호 입니다.
            </div>
        </div>
        <!--
        <div class="jumbotron">
            <div class="container row">
                <div class="col-sm-3">
                    <img src='./img/face.png' class="img-thumbnail rouned-circle mx-lg-5" alt="금준호" />
                </div>
                <div class="col">
                    <h2 class="text-left"><strong>세상을 디버깅 하는 개발자, 금준호 입니다.</strong></h2>
                    <h6 class="text-left">● 스마트 팩토리 회사에서 Vue + Node를 이용하여 웹 개발중
                        <br />이메일 : iubns@naver.com
                    </h6>
                    <h6>-코딩이 재미있어서 이것저것 만들다보니 많은 프로그램을 만들게 되었습니다.
                        <br />지금까지 만들었던 프로그램중 일부를 소개합니다!-
                    </h6>
                    <h6>주로 C#으로 개발을 하지만 다른 언어들(JAVA, PHP, JS, SQL)도 자주 사용합니다.</h6>
                </div>
            </div>
        </div>
        -->
    </div>
    <!--
    <div class="filter-list">
        <div>
            all
        </div>
        <div>
            console
        </div>
        <div>
            web
        </div>
        <div>
            mobile
        </div>
    </div>
    -->
    <div id="projectList" class="project-list">

    </div>
</body>

</html>